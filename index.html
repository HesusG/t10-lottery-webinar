<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TripleTen Random Selector</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- External Libs -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fireworks-js@2.10.7/dist/index.umd.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app" class="app-container">
        <!-- Left Pane: Wheel -->
        <div id="pane-wheel" class="pane wheel-pane">
            <div class="wheel-header">
                <div class="logo">T10 SELECTOR</div>
                <div class="wheel-status">Ready to spin</div>
            </div>
            
            <div class="wheel-stage">
                <div class="wheel-container">
                    <div class="wheel-overlay-top"></div>
                    <div class="wheel-strip" id="wheel-strip">
                        <!-- Numbers generated via JS -->
                    </div>
                    <div class="wheel-overlay-bottom"></div>
                    <div class="wheel-selection-window"></div>
                </div>
            </div>

            <div class="wheel-controls">
                <button id="btn-spin" class="btn btn-primary btn-xl" disabled>
                    SPIN WHEEL
                </button>
            </div>
        </div>

        <!-- Right Pane: Data Table & Settings -->
        <div id="pane-data" class="pane data-pane">
            <div class="pane-header">
                <div class="tab-controls">
                    <button class="tab-btn active" data-tab="table">Participants</button>
                    <button class="tab-btn" data-tab="settings">Settings</button>
                </div>
                <div class="file-controls">
                    <label for="file-upload" class="btn btn-sm btn-outline">
                        Import CSV/XLSX
                    </label>
                    <input type="file" id="file-upload" accept=".csv, .xlsx, .xls" hidden>
                </div>
            </div>

            <div class="pane-content">
                <!-- Data Tab -->
                <div id="tab-table" class="tab-content active">
                    <div id="empty-state" class="empty-state">
                        <h3>No Data Loaded</h3>
                        <p>Upload a CSV or Excel file to get started.</p>
                        <button class="btn btn-secondary" onclick="document.getElementById('file-upload').click()">Upload File</button>
                        <div class="recent-files" id="recent-files" style="display:none; margin-top: 1rem;">
                            <small>Or resume:</small>
                            <button id="btn-resume" class="btn btn-link">Resume previous session</button>
                        </div>
                    </div>
                    
                    <div id="table-container" class="table-container" style="display: none;">
                        <div class="table-toolbar">
                            <span id="row-count" class="badge">0 rows</span>
                            <div class="search-box">
                                <label for="display-col-select" class="text-xs">Display Col:</label>
                                <select id="display-col-select" class="input-sm"></select>
                            </div>
                            <label class="toggle-label text-xs">
                                <input type="checkbox" id="chk-header" checked> Header Row
                            </label>
                        </div>
                        <div class="table-wrapper">
                            <div id="virtual-scroller" class="virtual-scroller">
                                <div id="virtual-content" class="virtual-content">
                                    <!-- Rows injected here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="tab-settings" class="tab-content">
                    <div class="settings-group">
                        <h4>Appearance</h4>
                        <div class="form-row">
                            <label>Theme</label>
                            <select id="setting-theme" class="input-block">
                                <!-- Populated by JS -->
                            </select>
                        </div>
                        <div class="form-row">
                            <label>Layout Split</label>
                            <div class="btn-group">
                                <button class="btn-group-item" data-split="50-50">50/50</button>
                                <button class="btn-group-item" data-split="60-40">60/40</button>
                                <button class="btn-group-item" data-split="70-30">70/30</button>
                            </div>
                        </div>
                        <div class="form-row">
                            <label>Tab Orientation</label>
                            <div class="btn-group">
                                <button class="btn-group-item" data-orient="horizontal">Horizontal</button>
                                <button class="btn-group-item" data-orient="vertical">Vertical</button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h4>Animation</h4>
                        <div class="form-row">
                            <label>Spin Duration (s)</label>
                            <input type="number" id="setting-duration" value="10" min="5" max="60" class="input-block">
                        </div>
                         <div class="form-row">
                            <label>Celebration Duration (s)</label>
                            <input type="number" id="setting-celebration" value="20" min="5" max="60" class="input-block">
                        </div>
                    </div>

                    <div class="settings-group">
                        <label class="toggle-label">
                            <input type="checkbox" id="chk-advanced"> Show Advanced Controls
                        </label>
                        
                        <div id="advanced-controls" class="advanced-controls hidden">
                            <div class="form-row warning-box">
                                <label>Rig the Winner (Debug)</label>
                                <input type="number" id="setting-rigged-row" placeholder="Row #" class="input-block">
                                <small>Forces the wheel to stop on this row number.</small>
                            </div>
                            <div class="form-row">
                                <button id="btn-clear-data" class="btn btn-danger btn-sm">Clear All Data</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <h4>History</h4>
                        <ul id="history-list" class="history-list">
                            <!-- Populated by JS -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Celebration Overlay -->
    <div id="celebration-overlay" class="celebration-overlay hidden">
        <canvas id="fireworks-canvas"></canvas>
        <div class="celebration-content">
            <h1 class="celebration-title">WINNER!</h1>
            <div class="winner-display">
                <div class="winner-number" id="winner-number">#00</div>
                <div class="winner-name" id="winner-name">Name Placeholder</div>
            </div>
            <button id="btn-skip-celebration" class="btn btn-outline btn-white">Skip Celebration (Esc)</button>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
